# Идея проекта

Разработать Telegram-бота для архитектурного бюро, который помогает руководителю контролировать активность сотрудников и фиксировать их формат работы (офис, удалёнка, отпуск и т.п.).

# Основная задача

Бот должен собирать ежедневные отметки сотрудников о формате их работы и предоставлять руководителю удобный инструмент контроля — через Telegram-интерфейс, без внешних систем или IDE.

# Режимы работы

1. **Режим сотрудника**

   - Каждый день бот отправляет сообщение в 08:00 (по времени Екатеринбурга) с просьбой указать формат работы на день.

   - Сотрудник выбирает один из форматов: офис / удалёнка / учёба / болезнь / отпуск / отгул неопл. / отгул опл. / экспедиция.

   - Для отпусков, болезней и экспедиций бот запрашивает диапазон дат (в формате `dd.MM.YYYY` или `dd.MM`), проверяет корректность и сохраняет данные.

   - Если пользователь не отвечает до 20:00, бот автоматически проставляет статус "отгул неопл.".

   - Если пользователь не найден в списке сотрудников (по user_id), бот пишет "Доступ закрыт".

2. **Режим администратора (руководителя)**

   - По умолчанию один администратор: `@mirvien`.

   - Админ может:

     - Просматривать и выгружать сводку (последние 7 дней, 30 дней или с начала месяца).

     - Исправлять данные сотрудников вручную (пошагово: выбрать сотрудника → указать дату/диапазон → выбрать формат).

     - Добавлять новых сотрудников.

     - Назначать других администраторов (по username из списка сотрудников).

     - Настраивать время рассылок (08:00 / 15:00 / 20:00).

   - Удаление сотрудника переводит его в статус "уволен", но история сохраняется.

# Технические детали

- Проверка user_id — на каждом шаге. Незарегистрированные пользователи не учитываются в статистике.

- Формат даты — `dd.MM.YYYY` или `dd.MM` (если год не указан, берётся текущий).

- Хранение данных в SQLite или PostgreSQL:

  - `users(id, tg_id, username, name, role, active_flag)`

  - `work_days(user_id, date, status, updated_at)`

  - `vacations(user_id, start, end, type)`

- При перезапуске бот должен проверять, восстановлено ли расписание рассылок.

- Все рассылки выполняются с учётом часового пояса Екатеринбурга (`Asia/Yekaterinburg`).

- При первом запуске бот спрашивает согласие на обработку персональных данных.

- Код должен быть готов к упаковке в `.exe` или Docker-образ для передачи заказчику.

# Цель проекта

Создать MVP-бота, который:

- работает полностью через Telegram без IDE,

- прост в запуске и передаче заказчику,

- фиксирует ежедневные отметки сотрудников,

- даёт руководителю прозрачную статистику и гибкие настройки.

# Будущие доработки (не входят в MVP)

- Интеграция LLM-агента для ответов на вопросы руководителя ("Кто сегодня на удалёнке?", "Сколько людей в офисе за неделю?").

- Интеграция с Google Sheets или Notion для внешней отчётности.

---

LLM-ассистент в Cursor должен помогать:

- писать код Python-бота с использованием `aiogram` или `python-telegram-bot`,

- проектировать структуры БД,

- писать тесты,

- формировать Dockerfile и скрипты запуска (`start.sh`, `run.bat`),

- генерировать техническую документацию на основе текущей логики.

