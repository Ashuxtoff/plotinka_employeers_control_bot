# Telegram-бот для контроля сотрудников

Telegram-бот для архитектурного бюро, который помогает руководителю контролировать активность сотрудников и фиксировать их формат работы.

## Установка

1. Создайте виртуальное окружение:
```bash
python3 -m venv .venv
```

2. Активируйте виртуальное окружение:

**macOS/Linux:**
```bash
source .venv/bin/activate
```

**Windows:**
```bash
.venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` и добавьте токен вашего бота:
```
BOT_TOKEN=ваш_токен_от_BotFather
```

## Запуск

Убедитесь, что виртуальное окружение активировано, затем:

```bash
python -m bot.main
```

## Тестирование

### Запуск автотестов

После установки зависимостей вы можете запустить автотесты:

**macOS/Linux:**
```bash
./run_tests.sh
```

**Windows:**
```bash
run_tests.bat
```

**Или напрямую через pytest:**
```bash
pytest
```

**С покрытием кода:**
```bash
pytest --cov=bot --cov-report=term-missing --cov-report=html
```

Отчёт о покрытии будет сохранён в `htmlcov/index.html` (откройте в браузере).

### Автоматический запуск тестов перед коммитом

Для автоматического запуска тестов перед каждым коммитом установите pre-commit hooks:

```bash
pip install pre-commit
pre-commit install
```

Теперь тесты будут запускаться автоматически перед каждым коммитом. Если тесты не пройдут, коммит будет отменён.

### Ручное тестирование бота

После запуска бота:
1. Найдите вашего бота в Telegram
2. Отправьте команду `/start`
3. Бот должен ответить приветственным сообщением

## Структура проекта

```
plotinka_employeers_control_bot/
├── bot/                    # Основной код бота
│   ├── main.py            # Точка входа
│   ├── config.py          # Конфигурация
│   ├── handlers/          # Обработчики команд
│   └── utils/             # Утилиты
├── tests/                 # Тесты
├── docs/                  # Документация
└── requirements.txt       # Зависимости
```

## Документация

- [Идея проекта](docs/idea.md)
- [Видение проекта](docs/vision.md)
- [Правила разработки](docs/conventions.md)
- [План разработки](docs/tasklist.md)
- [Workflow разработки](docs/workflow.md)
